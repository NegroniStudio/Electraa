<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Plan Nutricional | Electra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #fcfcfd; color: #101828; margin: 0; padding: 0; }
        .glass-card { background: white; border: 1px solid #eaecf0; border-radius: 1.5rem; padding: 1.5rem; }
        
        .input-range {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: #eaecf0;
            border-radius: 5px;
            outline: none;
        }
        .input-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #1570ef;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        .tab-active { background: #1570ef; color: white; }

        /* Barra de herramientas inferior UNIFICADA */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(16px);
            border-top: 1px solid #eaecf0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 1.25rem 0.5rem;
            z-index: 9999;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: #667085;
            flex: 1;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .nav-item i { font-size: 1.1rem; }
        .nav-item span { font-size: 9px; font-weight: 700; text-transform: uppercase; }
        
        /* Estilo para la página actual */
        .nav-item.active { color: #1570ef; }

        .badge-exact {
            background: #ecfdf3;
            color: #027a48;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 700;
        }
    </style>
</head>
<body class="pb-32">

    <!-- HEADER -->
    <div class="relative h-44 w-full overflow-hidden bg-slate-900 flex items-center px-6">
        <div class="z-10">
            <h1 class="text-2xl font-black text-white tracking-tighter">Nutrición de Electra</h1>
            <div class="flex items-center gap-2 mt-1">
                <span class="badge-exact">9 Dic 2025</span>
                <p class="text-blue-200 text-xs font-bold uppercase tracking-wider">Border Collie</p>
            </div>
        </div>
        <div class="absolute right-[-10px] opacity-10">
            <i class="fas fa-dog text-[120px] text-white"></i>
        </div>
    </div>

    <div class="px-5 -mt-8 relative z-10">
        <!-- CALCULADORA INTELIGENTE -->
        <div class="glass-card shadow-xl border-blue-100">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <p class="text-[10px] font-black text-blue-600 uppercase tracking-widest">Peso de Electra</p>
                    <h2 class="text-4xl font-black text-slate-900" id="weightDisplay">5.0 <span class="text-lg font-medium text-slate-400">kg</span></h2>
                </div>
                <div class="text-right">
                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Edad al día de hoy</p>
                    <p class="text-sm font-bold text-slate-800" id="ageDisplay">--</p>
                    <p class="text-[9px] text-slate-400 font-medium" id="daysDisplay">-- días totales</p>
                </div>
            </div>

            <div class="flex bg-slate-100 p-1 rounded-xl mb-6 border border-slate-200">
                <button id="btnStandard" onclick="setPrecision('standard')" class="flex-1 py-2 text-[10px] font-extrabold rounded-lg transition-all tab-active">NORMAL</button>
                <button id="btnPrecise" onclick="setPrecision('precise')" class="flex-1 py-2 text-[10px] font-extrabold rounded-lg transition-all text-slate-500">PRECISO (0.1)</button>
            </div>

            <div class="space-y-4">
                <input type="range" min="0.5" max="35" step="0.5" value="5" id="weightSlider" class="input-range">
                <div class="flex justify-between text-[9px] font-bold text-slate-400 uppercase">
                    <span>Mín: 0.5kg</span>
                    <span id="stepLabel">Paso: 0.5kg</span>
                    <span>Máx: 35kg</span>
                </div>
            </div>

            <!-- RESULTADOS CALCULADOS -->
            <div class="grid grid-cols-3 gap-3 mt-8">
                <div class="bg-blue-50/50 p-3 rounded-2xl text-center border border-blue-100">
                    <p class="text-[8px] font-bold text-blue-600 uppercase">Mañana</p>
                    <p class="text-xl font-black text-blue-900" id="mealSize">--</p>
                    <p class="text-[8px] text-blue-400">Gramos</p>
                </div>
                <div class="bg-blue-50/50 p-3 rounded-2xl text-center border border-blue-100">
                    <p class="text-[8px] font-bold text-blue-600 uppercase">Tarde</p>
                    <p class="text-xl font-black text-blue-900" id="mealSize2">--</p>
                    <p class="text-[8px] text-blue-400">Gramos</p>
                </div>
                <div class="bg-blue-50/50 p-3 rounded-2xl text-center border border-blue-100">
                    <p class="text-[8px] font-bold text-blue-600 uppercase">Noche</p>
                    <p class="text-xl font-black text-blue-900" id="mealSize3">--</p>
                    <p class="text-[8px] text-blue-400">Gramos</p>
                </div>
            </div>

            <div class="mt-6 pt-5 border-t border-slate-100 flex justify-between items-center">
                <div>
                    <p class="text-xs font-bold text-slate-500">Total diario:</p>
                    <p class="text-[9px] text-slate-400 leading-none">Ajustado al metabolismo de cachorro</p>
                </div>
                <p class="text-2xl font-black text-slate-900" id="totalDaily">--</p>
            </div>
        </div>

        <!-- BOTÓN ALIMENTOS PROHIBIDOS -->
        <a href="AlimentosProhibidos.html" class="mt-4 flex items-center justify-between w-full bg-red-50 border border-red-100 p-4 rounded-2xl text-red-700 shadow-sm active:scale-95 transition-transform">
            <div class="flex items-center gap-3">
                <div class="bg-red-500 text-white p-2 rounded-lg">
                    <i class="fas fa-biohazard text-sm"></i>
                </div>
                <span class="text-xs font-black uppercase tracking-tight">Alimentos Prohibidos</span>
            </div>
            <i class="fas fa-chevron-right text-red-200"></i>
        </a>

        <!-- RESERVA ENTRENAMIENTO -->
        <h3 class="text-sm font-black text-slate-400 uppercase tracking-widest mt-8 mb-3">Refuerzo y Salud</h3>
        <div class="bg-slate-900 rounded-3xl p-5 text-white mb-6">
            <div class="flex items-center justify-between mb-4 border-b border-white/10 pb-4">
                <div>
                    <p class="text-[9px] text-slate-400 uppercase font-bold">Reserva Entrenamiento (15%):</p>
                    <p class="text-2xl font-black text-yellow-400" id="trainAmount">--</p>
                </div>
                <div class="bg-yellow-400/10 p-2 rounded-xl">
                    <i class="fas fa-star text-yellow-400"></i>
                </div>
            </div>
            <div class="flex gap-3 items-start">
                <div class="text-blue-400 mt-1"><i class="fas fa-faucet-drip"></i></div>
                <p class="text-[11px] text-slate-300 leading-relaxed">
                    <b class="text-white">Hidratación:</b> Los premios secos dan sed. Ofrece agua cada 10-15 min durante las sesiones.
                </p>
            </div>
        </div>
    </div>

    <!-- NAVEGACIÓN INFERIOR (CORREGIDA) -->
    <nav class="nav-bar">
        <a href="index.html" class="nav-item">
            <i class="fas fa-house-user"></i>
            <span>Inicio</span>
        </a>
        <a href="Entreno.html" class="nav-item">
            <i class="fas fa-dumbbell"></i>
            <span>Entreno</span>
        </a>
        <a href="Comida.html" class="nav-item active">
            <i class="fas fa-utensils"></i>
            <span>Comida</span>
        </a>
        <a href="Tips.html" class="nav-item">
            <i class="fas fa-lightbulb"></i>
            <span>Tips</span>
        </a>
        <a href="Teoría.html" class="nav-item">
            <i class="fas fa-book-open"></i>
            <span>Teoría</span>
        </a>
        <a href="Agenda.html" class="nav-item">
            <i class="fas fa-calendar-alt"></i>
            <span>Agenda</span>
        </a>
    </nav>

    <script>
        const weightSlider = document.getElementById('weightSlider');
        const weightDisplay = document.getElementById('weightDisplay');
        const ageDisplay = document.getElementById('ageDisplay');
        const daysDisplay = document.getElementById('daysDisplay');
        const totalDaily = document.getElementById('totalDaily');
        const mealSize = document.getElementById('mealSize');
        const mealSize2 = document.getElementById('mealSize2');
        const mealSize3 = document.getElementById('mealSize3');
        const trainAmount = document.getElementById('trainAmount');
        const stepLabel = document.getElementById('stepLabel');

        const birthDate = new Date(2025, 11, 9); 
        const today = new Date(); 

        function setPrecision(type) {
            if (type === 'standard') {
                weightSlider.step = "0.5";
                stepLabel.innerText = "Paso: 0.5kg";
                document.getElementById('btnStandard').className = "flex-1 py-2 text-[10px] font-extrabold rounded-lg transition-all tab-active";
                document.getElementById('btnPrecise').className = "flex-1 py-2 text-[10px] font-extrabold rounded-lg transition-all text-slate-500";
            } else {
                weightSlider.step = "0.1";
                stepLabel.innerText = "Paso: 0.1kg";
                document.getElementById('btnPrecise').className = "flex-1 py-2 text-[10px] font-extrabold rounded-lg transition-all tab-active";
                document.getElementById('btnStandard').className = "flex-1 py-2 text-[10px] font-extrabold rounded-lg transition-all text-slate-500";
            }
            updateValues();
        }

        function calculateExactAge() {
            const diffTime = Math.abs(today - birthDate);
            const totalDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const months = Math.floor(totalDays / 30.44);
            const days = Math.floor(totalDays % 30.44);
            return { months, days, totalDays };
        }

        function updateValues() {
            const weight = parseFloat(weightSlider.value);
            weightDisplay.innerHTML = `${weight.toFixed(1)} <span class="text-lg font-medium text-slate-400">kg</span>`;
            
            const age = calculateExactAge();
            ageDisplay.innerText = `${age.months} m, ${age.days} d`;
            daysDisplay.innerText = `${age.totalDays}`;

            let factor;
            if (age.totalDays <= 60) factor = 62; 
            else if (age.totalDays <= 120) factor = 52;
            else if (age.totalDays <= 240) factor = 42;
            else factor = 32;

            const totalGrams = weight * factor;
            const trainingReserve = Math.round(totalGrams * 0.15); 
            const netDaily = totalGrams - trainingReserve;
            const perMeal = Math.round(netDaily / 3);

            totalDaily.innerText = `${Math.round(totalGrams)}g`;
            mealSize.innerText = perMeal;
            mealSize2.innerText = perMeal;
            mealSize3.innerText = perMeal;
            trainAmount.innerText = `${trainingReserve}g`;
        }

        weightSlider.addEventListener('input', updateValues);
        updateValues();
    </script>
</body>
</html>
